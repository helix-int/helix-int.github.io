/*!
 * businesslounge WordPress Theme Admin Scripts
 * Copyright (C) 2014 RT-Themes
 * http://rtthemes.com
 *
 * Various scripts for admin UI Only
 */
!function($){"use strict";function rt_shortcode_helper(){function a(){$("#rttheme_shortcode_helper .rt_tabs").rt_tabs(),$("#rttheme_shortcode_helper .tab_nav > li").on("click",function(){$(".modal_content").stop().animate({scrollTop:0},300)}),$("#rttheme_shortcode_helper").show("fade",{duration:300,easing:"swing"}),$(".tab_contents, .tab_nav").scrollTop(0),"undefined"!=typeof tinyMCE?null!=window.tinyMCE.activeEditor&&$("#rttheme_shortcode_helper .insert_to_editor").css(""!=window.tinyMCE.activeEditor.editorId&&"rt_hidden_rich_editor"!=window.tinyMCE.activeEditor.editorId?{display:"block"}:{display:"none"}):$("#rttheme_shortcode_helper .insert_to_editor").css({display:"none"}),$(".insert_to_editor").on("click",function(){var a=$(this).prev("textarea").val(),b="";if($("#"+tinymce.activeEditor.id).parents("#wp-content-wrap").hasClass("html-active")===!1)for(var c=a.split(/\n/),d=0,e=c.length;e>d;d++){b+=c[d];var f=$.trim(c[d]),g=f.substr(f.length-1);">"!=g&&(b+="<br />")}else b=a;wp.media.editor.insert(b),$("#rttheme_shortcode_helper .rt_modal_close").trigger("click")}),"undefined"!=typeof tinymce&&"undefined"!=typeof tinymce.create&&(tinymce.create("tinymce.plugins.rt_theme_shortcodes",{init:function(a,b){a.addButton("rt_themeshortcode",{title:"Theme Shortcodes",image:b+"/../images/theme-shorcodes.png",onclick:function(){jQuery("#wp-admin-bar-rt_shortcode_helper_button").trigger("click")}})},createControl:function(){return null},getInfo:function(){return{longname:"Shortcodes",author:"RT-Theme",version:"1.0"}}}),tinymce.PluginManager.add("rt_themeshortcode",tinymce.plugins.rt_theme_shortcodes)),$(".rt_clean_copy").on("click",function(){if(!$(this).hasClass("clicked")){var a=$(this).html(),b=$('<input type="text" value="'+a+'" style="width:100px;">');$(this).html(""),$(this).addClass("clicked"),b.appendTo($(this)),b.select()}})}if(0==$("#rttheme_shortcode_helper").length){$('<div class="rt_loading_bar"></div>').appendTo("body");var b="action=my_action&shortcode_helper=true";$.post(ajaxurl,b,function(b){$(".rt_loading_bar").remove(),$(b).appendTo("body").fadeIn(500),a()})}else $("#rttheme_shortcode_helper").show("fade",{duration:300,easing:"swing"})}function rt_icon_selection(a){var b=a.data.purpose,c=$(a.target),d=$(".icon-selection");if("item"==b?$(".icon-selection").removeClass("admin_bar"):$(".icon-selection").addClass("admin_bar"),0==d.length){$('<div class="rt_loading_bar"></div>').appendTo("body");var e="action=my_action&iconSelector=true";$.post(ajaxurl,e,function(a){$(".rt_loading_bar").remove(),"item"==b?($(a).appendTo("body").fadeIn(500),$(".icon-selection .blank").show()):($(a).addClass("admin_bar").appendTo("body").fadeIn(500),$(".icon-selection .blank").hide())})}else $(d).fadeIn(500),"item"==b?$(".icon-selection .blank").show():$(".icon-selection .blank").hide();$(document.body).on("click",".icon_selection_close",function(){$(".icon-selection").hide(),c.focus()}),$(document.body).on("click",".list-icons li",function(){if("item"==b){var c=$.trim($(this).attr("class")),d=$(a.target),e=$(d).val(),f=e.split(" "),g="",h=1;for(i=0;i<f.length;i++)0==f[i].search(/icon-/i)&&"blank"==c?g+="":0==f[i].search(/icon-/i)&&"blank"!=c&&1==h?(g+=c,h+=1):f[i].search(/icon-/i)<0&&"blank"!=c&&1==h?(g+=" "+f[i]+" "+c,h+=1):g+=" "+f[i];$(d).focus(),$(d).val($.trim(g)),$(d).change(),$(".icon-selection").hide(),$(document.body).off("click",".list-icons li")}})}function getParameterByName(a){var a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null==c?"":decodeURIComponent(c[1].replace(/\+/g," "))}if($(document.body).on("click",".rt_modal_close",function(){$(this).parents(".rt_modal:eq(0)").css({display:"none"})}),$("#rt_theme_reset_settings input").on("click",function(){var a=confirm(rtframework_variables.reset_theme);return a?void 0:!1}),$("#customize-controls #save").on("click",function(){wp.customize.previewer.refresh()}),window.setTimeout(function(){$("[data-depends-id]").each(function(){var a=$(this),b=$("#"+a.attr("data-depends-id")),c=$.makeArray(a.attr("data-depends-values").split(","));if(0==b.length){b=$("[data-customize-setting-link='"+a.attr("data-depends-id")+"']"),a=$(this).parents(".customize-control:eq(0)")}b.on("change",function(b,d){var e=$("option:selected",this).val();$.inArray(e,c)>=0?d?a.show():a.show().effect("highlight",700):a.hide()}),b.trigger("change","load")})},1e3),$(document.body).on("click",".tooltip_icon",function(){var a=$(this).parents(".table-row:eq(0)").find(".desc:eq(0)");a.slideToggle("fast").toggleClass("active"),$(this).toggleClass("clicked")}),$("#wp-admin-bar-rt_shortcode_helper_button").on("click",{purpose:"admin_bar"},rt_shortcode_helper),$(window).on("rt_theme_shortcodes",function(){rt_shortcode_helper()}),$(".style_parts > div").on("mouseenter mouseleave",function(a){var b=$(this).attr("data-desc"),c=$('<div class="rt_tooltip_message">'+b+"</div>");$(".rt_tooltip_message").remove(),"mouseenter"==a.type&&($("body").append(c),c.css({top:$(this).offset().top-c.height()/2,left:$(this).offset().left-240}))}),$.fn.start_scripts=function(a,b){b&&(b="."+b),$(a).find(".multiple"+b).asmSelect({addItemTarget:"bottom",animate:!0,highlight:!0,sortable:!0,removeLabel:"x"}),$(a).find(".range"+b).rangeinput(),$(a).find(".div_controller").trigger("change"),$(a).find(".color_field input").each(function(){0==$(this).hasClass("hidden_slide_item")&&($(this).spectrum({flat:!1,showInput:!0,showButtons:!1,showAlpha:!0,move:function(a){var b;b=a.getAlpha()<1?a.toRgbString():a.toHexString(),$(this).val(b),$(this).attr("value",b)},change:function(a){var b;b=a.getAlpha()<1?a.toRgbString():a.toHexString(),$(this).val(b),$(this).attr("value",b)},hide:function(a){if(""==$(this).val()&&"#ffffff"==a.toHexString()){var b;b=a.getAlpha()<1?a.toRgbString():a.toHexString(),$(this).val(b),$(this).attr("value",b)}}}),$(this).show(function(){""==$(this).val()&&$(this).attr("value","")}))})},$.fn.start_scripts(".rt-metaboxes, .widgets-holder-wrap","","page_load"),$(document).on("click",".rttheme_upload_button",function(a){var b=$(this).prev(),c=$('[data-holderid="'+$(this).data("inputid")+'"]');if(a.preventDefault(),d)return void d.open();var d=wp.media.frames.file_frame=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1});d.on("select",function(){var a=d.state().get("selection").first().toJSON();b.val(a.url).trigger("change"),"image"!=a.type&&(c.find("img").attr("src",""),c.removeClass("visible"))}),d.open()}),$(document).on("keyup change",".upload_field",function(){var a=$(this),b=$('[data-holderid="'+$(this).prop("id")+'"]');a.val()?(b.find("img").attr("src",a.val()),b.addClass("visible")):(b.find("img").attr("src",""),b.removeClass("visible"))}),$(document).on("click",".uploaded_file .delete_single",function(){var a=$("#"+$(this).data("inputid"));a.val("").trigger("keyup")}),$(".upload_field").on("focus",function(){$(this).trigger("select")}),$(document).on("click",".rt_gallery_add_button",function(a){{var b;$(this)}return a.preventDefault(),b?void b.open():(b=wp.media.frames.file_frame=wp.media({title:wp.media.view.l10n.addMedia,multiple:!0}),b.on("select",function(){var a=b.state().get("selection"),c=$("#rt-gallery-images"),d=c.val(),e=""==d?new Array:d.split(",");a.map(function(a){var a=a.toJSON();(0==e.length||-1===$.inArray(a.id.toString(),e))&&($(".rt-gallery-uploaded-photos").append('<li><img src="'+a.sizes.thumbnail.url+'" data-rel="'+a.id+'"></li>'),e.push(a.id),c.val(e.join(",")))})}),b.on("open",function(){var a=b.state().get("selection");if(""==$("#rt-gallery-images").val())return!1;var c=$("#rt-gallery-images").val().split(","),d="";c.forEach(function(b){d=wp.media.attachment(b),d.fetch(),a.add(d?[d]:[])})}),void b.open())}),$(document).on("click",".rttheme_image_upload_button",function(a){var b=$(this).prev(),c=$('[data-holderid="'+$(this).data("inputid")+'"]'),d=$(this).next(".display_file_name");if(a.preventDefault(),e)return void e.open();var e=wp.media.frames.downloadable_file=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1});e.on("select",function(){var a=e.state().get("selection").first().toJSON();b.val(a.id),"image"==a.type?(c.find("img").attr("src",a.sizes.thumbnail.url),c.addClass("visible")):(c.find("img").attr("src",""),c.removeClass("visible"),d.html(a.filename))}),e.open()}),$("ul.rt-gallery-uploaded-photos").sortable({handle:"img",forceHelperSize:!0,opacity:.5,scroll:!0,scrollSpeed:20,cursor:"move",distance:10,placeholder:"ui-sortable-placeholder",tolerance:"pointer",start:function(a,b){b.item;b.placeholder.width(b.item.width()),b.placeholder.height(b.item.height())},update:function(){var a=$("#rt-gallery-images"),b="";$(this).find("li").each(function(){var a=$(this).find("img").attr("data-rel");b=""==b?a:b+","+a}),a.val(b)}}),$(document.body).on("mouseenter",".rt-gallery-uploaded-photos li",function(){var a='<div class="gallery_delete"></div>',b=$(this).find(".gallery_delete");return b.length?(b.show(),!1):void $(this).append(a)}),$(document.body).on("mouseleave",".rt-gallery-uploaded-photos li",function(){$(this).find(".gallery_delete").hide()}),$(document.body).on("click",".rt-gallery-uploaded-photos li .gallery_delete",function(){var a=confirm(rtframework_variables.delete_image),b=$(this),c=$("#rt-gallery-images"),d=c.val().split(","),e=b.parent("li"),f=e.find("img:eq(0)").attr("data-rel");if(a){d=jQuery.grep(d,function(a){return a!=f});var g=d.join();return c.val(g),b.parent("li").remove(),!0}return!1}),$(document).on("change",".div_controller",function(){var a=$("option:selected",this).val(),b=$(this).parents(".options_set_holder:eq(0)").find(".hidden_options_set:eq(0)");"new"===a||"boxed-body"===a||"half-boxed"===a||"disabled_parallax"===a?b.slideDown("fast"):b.slideUp("fast")}),$(".div_controller").trigger("change"),$(document.body).on("keyup","#rt_icon_search",function(){var a=$(this).val(),b=0;$(".list-icons li").each(function(){$(this).find("span").text().search(new RegExp(a,"i"))<0?$(this).fadeOut():($(this).show(),b++)});$("#rt_icon_search_result").text(b+" icons found")}),$(document.body).on("click",'.button_icon,.button2_icon,.icon_name,.icon_selection,.edit-menu-item-classes,[data-setting="rt-icon-name"]',{purpose:"item"},rt_icon_selection),$("#wp-admin-bar-rt_icons .ab-item div").on("click",{purpose:"admin_bar"},rt_icon_selection),$(document).ajaxSuccess(function(a,b,c){var d="latest_posts",e="popular_posts",f="recent_posts_gallery",g="rt_products";if(c.data&&"function"==typeof c.data.search&&c.data&&-1!=c.data.search("action=save-widget")&&(-1!=c.data.search("id_base="+d)||-1!=c.data.search("id_base="+e)||-1!=c.data.search("id_base="+f)||-1!=c.data.search("id_base="+g))){var h=c.data,i=h.split("widget-id="),j=i[1].split("&id_base"),k=j[0];jQuery("select[multiple]#widget-"+k+"-categories").asmSelect({addItemTarget:"bottom",animate:!0,highlight:!0,removeLabel:"x"})}}),$(document).on("click","#rt_theme_custom_fonts .delete-font",function(){var a=($("#rt_theme_custom_fonts form"),confirm(rtframework_variables.delete_font));return a?void $(this).parents(".font-holder:eq(0)").remove():!1}),$.fn.custom_font_forms=function(){$(this).each(function(){var a=$(this);$(this).on("change",function(){var b=a.parents(".form-table:eq(0)");"typekit"==$("option:selected",this).val()?(b.find(".kitid").show(),b.find(".self_hosted_font").hide()):(b.find(".kitid").hide(),b.find(".self_hosted_font").show()),"self-hosted"==$("option:selected",this).val()?b.find(".self_hosted_font").show():b.find(".self_hosted_font").hide()}),$(window).on("load",function(){a.trigger("change")})})},$("#rt_theme_custom_fonts form .rt-font-type").custom_font_forms(),$.fn.extend({ShowPostFormats:function(){var a=$(this),b=a.attr("id"),c={};c["post-format-0"]="#rt_standart_post_custom_fields",c["post-format-gallery"]="#rt_gallery_post_custom_fields",c["post-format-link"]="#rt_link_post_custom_fields",c["post-format-video"]="#rt_video_post_custom_fields",c["post-format-audio"]="#rt_audio_post_custom_fields";for(var d in c)"post-format-0"!==d&&$(c[d]).css({display:"none"});$(c[b]).show().effect("highlight",700)}}),$("#post-formats-select input:checked").ShowPostFormats(),$("#post-formats-select").on("change",function(){$("#post-formats-select input:checked").ShowPostFormats()}),$.fn.rt_portfolio_formats=function(){var a={"rttheme_portfolio_post_format-1":"rttheme_image_format_options","rttheme_portfolio_post_format-2":"rttheme_video_format_options","rttheme_portfolio_post_format-3":"rttheme_audio_format_options"};for(var b in a){var c=a[b];$("#"+c).hide()}var d=$("#"+a[$(this).attr("id")]);d.slideDown(400).effect("highlight",700)},$(window).on("load",function(){$("#rttheme_portfolio_post_format input:checked").length>0?$("#rttheme_portfolio_post_format input:checked").rt_portfolio_formats():$("#rttheme_portfolio_post_format-1").attr("checked",!0).rt_portfolio_formats(),$("#rttheme_portfolio_post_format").on("change",function(){$("#rttheme_portfolio_post_format input:checked").rt_portfolio_formats()})}),$("body").hasClass("nav-menus-php")){var form=' 			<p class="rt-mega-menu description-wide"> 			<label>Multi-Column Menu 			<input class="rt-multi-column-menu widefat code" type="checkbox"></label></p> 		',form_checked=' 			<p class="rt-mega-menu description-wide"> 			<label>Multi-Column Menu 			<input class="rt-multi-column-menu widefat code" checked type="checkbox"></label></p> 		',column_count=' 			<p class="rt-mega-menu description-wide hidden-field column-item-size"> 			<label>Column Item Size 			<input class="rt-multi-column-item-size widefat code" value="column-item-size-value" type="text" /></label></p> 		';$(".menu-item-settings").each(function(){var a=$(this).find(".edit-menu-item-classes").val();if(a.search(/multicolumn-/i)>-1){$(this).find(".field-move").before(form_checked);var b=a.split(" "),c="";for(i=0;i<b.length;i++)if(b[i].search(/multicolumn-/i)>-1){var d=b[i].split("-");c=d[d.length-1]}$(this).find(".field-move").before(column_count.replace(/column-item-size-value/i,c).replace(/hidden-field/i,""))}else $(this).find(".field-move").before(form),$(this).find(".field-move").before(column_count.replace(/column-item-size-value/i,"3"))}),$(".submit-add-to-menu").on("click",function(){$(document).ajaxStop(function(){$(".menu-item.pending").each(function(){$(this).find(".rt-multi-column-menu").length<1&&($(this).find(".field-move").before(form),$(this).find(".field-move").before(column_count.replace(/column-item-size-value/i,"3")))})})}),$(document.body).on("click",".rt-multi-column-menu",function(){var a=$(this).parents(".menu-item-settings").find(".edit-menu-item-classes"),b=a.val(),c=$(this).parents(".rt-mega-menu:eq(0)").next(".rt-mega-menu"),d=c.find(".rt-multi-column-item-size");if($(this).prop("checked"))a.val($.trim(b)+" multicolumn-"+d.val()),c.removeClass("hidden-field");else{var e=b.split(" "),f="";for(i=0;i<e.length;i++)f+=e[i].search(/multicolumn-/i)>-1?"":e[i];c.addClass("hidden-field"),a.val($.trim(f))}}),$(document.body).on("keyup mouseleave",".rt-multi-column-item-size",function(){var a=$(this).parents(".menu-item-settings").find(".edit-menu-item-classes"),b=a.val(),c="";for(classNames_split=b.split(" "),i=0;i<classNames_split.length;i++)c+=classNames_split[i].search(/multicolumn-/i)>-1?" multicolumn-"+$(this).val():" "+classNames_split[i];a.val($.trim(c))})}$("#rt-demo-parts").on("change",function(){"all"==$("option:selected",$(this)).val()||"contents"==$("option:selected",$(this)).val()?$("#rt_demo_import_settings td.builder").show().effect("highlight",500):$("#rt_demo_import_settings td.builder").hide()}),$("#rt-demo-import-button").on("click",function(a){function b(a,c,d,f){k.text(c+"/10"),$.ajax({type:"GET",url:a,data:{action:"demo_import",demo:d,part:"contents",builder:e.val(),step:c},success:function(e){return e.indexOf("{{importer_error}}")>=0?(alert("Import process cancelled, click to the logs link to see the errors."),f.find(".logs").append(e.replace("{{importer_error}}","")),f.removeClass("importing").addClass("import-failed"),$(window).trigger("rt_contents_imported").off("rt_contents_imported"),!1):(f.find(".logs").append(e),10>c&&b(a,c+1,d,f),void(10==c&&(f.removeClass("importing").addClass("imported"),$(window).trigger("rt_contents_imported").off("rt_contents_imported"))))},error:function(a,b,c){console.log(c)}})}a.preventDefault();var c=($(this),$(this).parents("form:eq(0)"),$("option:selected",$("#rt-demo")).val()),d=$("option:selected",$("#rt-demo-parts")).val(),e=$("option:selected",$("#rt-builder-option")),f=$("#contents-result"),g=$("#widgets-result"),h=$("#options-result"),i=$('#rt-demo-parts option[value="revslider"]').data("active"),j=$("#revslider-result"),k=f.find("strong");if(""==d)return alert(rtframework_params.select_parts),void $("#rt-demo-parts").effect("highlight",3e3);if($("#rt-demo").length>0&&""==c)return alert(rtframework_params.select_demo),void $("#rt-demo").effect("highlight",3e3);if("all"==d||"contents"==d){if($("#rt-builder-option").length>0&&""==e.val())return alert(rtframework_params.select_builder),void $("#rt-builder-option").effect("highlight",3e3);if(!e.data("active"))return"elementor"==e.val()&&alert(rtframework_params.install_elementor),"vc"==e.val()&&alert(rtframework_params.install_vc),void $("#rt-builder-option").effect("highlight",3e3)}if("revslider"==d&&!i)return void alert(rtframework_params.install_revslider);if("all"==d||"contents"==d){if(f.hasClass("importing"))return void alert(rtframework_params.wait_previous_install);f.show(),f.removeClass("imported import-failed").addClass("importing"),f.find(".logs").text(""),b(ajaxurl,1,c,f)}if("all"==d||"widgets"==d){if(g.hasClass("importing"))return void alert(rtframework_params.wait_previous_install);g.show(),g.removeClass("imported import-failed").addClass("importing"),g.find(".logs").text(""),$(window).on("rt_contents_imported",function(){$.ajax({type:"GET",url:ajaxurl,data:{action:"demo_import",demo:c,part:"widgets"},success:function(a){return a.indexOf("{{importer_error}}")>=0?(alert("Import process cancelled, click to the logs link to see the errors. "),g.find(".logs").append(a.replace("{{importer_error}}","")),g.removeClass("importing").addClass("import-failed"),!1):(g.removeClass("importing").addClass("imported"),void g.find(".logs").append(a))},error:function(a,b,c){console.log(c)}})}),"widgets"==d&&$(window).trigger("rt_contents_imported").off("rt_contents_imported")}if("all"==d||"options"==d){if(h.hasClass("importing"))return void alert(rtframework_params.wait_previous_install);h.show(),h.removeClass("imported import-failed").addClass("importing"),h.find(".logs").text(""),$(window).on("rt_contents_imported",function(){$.ajax({type:"GET",url:ajaxurl,data:{action:"demo_import",demo:c,part:"options"},success:function(a){return a.indexOf("{{importer_error}}")>=0?(alert("Import process cancelled, click to the logs link to see the errors. "),h.find(".logs").append(a.replace("{{importer_error}}","")),h.removeClass("importing").addClass("import-failed"),!1):(h.removeClass("importing").addClass("imported"),void h.find(".logs").append(a))},error:function(a,b,c){console.log(c)}})}),"options"==d&&$(window).trigger("rt_contents_imported").off("rt_contents_imported")}if(i&&("all"==d||"revslider"==d)){if(j.hasClass("importing"))return void alert(rtframework_params.wait_previous_install);j.show(),j.removeClass("imported import-failed").addClass("importing"),j.find(".logs").text(""),$(window).on("rt_contents_imported",function(){$.ajax({type:"GET",url:ajaxurl,data:{action:"demo_import",demo:c,part:"revslider"},success:function(a){return a.indexOf("{{importer_error}}")>=0?(alert("Import process cancelled, click to the logs link to see the errors. "),j.find(".logs").append(a.replace("{{importer_error}}","")),j.removeClass("importing").addClass("import-failed"),!1):(j.removeClass("importing").addClass("imported"),void j.find(".logs").append(a))},error:function(a,b,c){console.log(c)}})}),"revslider"==d&&$(window).trigger("rt_contents_imported").off("rt_contents_imported")}}),$("#rt_demo_import_settings .see_logs").on("click",function(a){a.preventDefault(),$(this).parents("div:eq(0)").find(".logs").show()}),$("#rt-demo").on("change",function(){var a=$(".demo-image"),b=a.data("base_url"),c=$("option:selected",$(this)).val();""==c?a.hide():a.attr("src",b+"/images/skins/"+c+".png").show()}),$('[data-vc-ui-element="button-save"]').on("click",function(){$(".vc_ui-panel-content-container").find("[data-rt-group]").each(function(){var a=$(this),b=a.data("rt-group"),c=$(this).parent().find("[data-rt-"+b+"]"),d="",e=1;c.each(function(){d+=$(this).val(),d+=e!==c.length?",":"",e++}),a.attr("value",d)})}),$('[data-element="rt_tabs"],[data-element="rt_accordion"],[data-element="rt_slider"],[data-element="rt_pricing_table"],[data-element="rt_compare_table"],[data-element="rt_timeline"],[data-element="rt_icon_list"],[data-element="rt_image_gallery"],[data-element="google_maps"]').on("click",function(a){return $(".vc_navgar-frontend").length<1?void 0:(a.preventDefault(),alert(rtframework_variables.vcbackend_only),!1)}),$("#rt-framework-license-check").on("click",function(){var a=$(this),b=$("#rt-framework-license-key").val(),c=$(".rt-framework-installer-status.plugin"),d=a.parent(".rt-framework-installer-bottom").find(".rt-framework-installer-loading");d.show(),a.hide(),c.html(rtframework_params.checking_license),$.ajax({type:"POST",url:rtframework_params.ajax_url,data:{action:"rtframework_license_manager","wpnonce-manager":a.data("wpnonce-manager"),licenseKey:b},success:function(b){b.error?(d.hide(),a.show(),c.html(b.error)):(d.hide(),a.hide(),c.html(b.ok),setTimeout(function(){location.reload()},1e3))},error:function(b,e,f){d.hide(),a.show(),c.html(rtframework_params.license_error),console.log(f)}})}),$("#rt-framework-install-plugins-button").on("click",function(e){function rt_framework_plugin_status(){$.ajax({type:"POST",url:rtframework_params.ajax_url,data:{action:"rtframework_plugin_manager",action_2:"plugin_status","wpnonce-manager":button.data("wpnonce-manager"),plugins:button.data("plugins")},success:function(a){rt_framework_plugin_status_array=a,$(window).trigger("rt_framework_plugin_status_ready")},error:function(a,b,c){loader.hide(),button.show(),plugin_status_bar.html(rtframework_params.error_plugins),console.log(c)}})}function rt_framework_manage_plugins(data){"install_task"==tasks[0]?plugin_status_bar.html(rtframework_params.installing_plugins):"update_task"==tasks[0]?plugin_status_bar.html(rtframework_params.updating_plugins):"activate_task"==tasks[0]&&plugin_status_bar.html(rtframework_params.activating_plugins),$.ajax({type:"POST",url:data.url,data:data,success:function(response,textStatus,XMLHttpRequest){tasks.shift(),tasks.length?rt_framework_manage_plugins(eval(tasks[0])):rt_framework_plugin_status()},error:function(a,b,c){loader.hide(),button.show(),plugin_status_bar.html('<span style="color:red;">'+rtframework_params.error_plugins+" [error code: "+tasks[0]+"_error]</span>"),console.log(c)}})}var button=$(this),plugins=[],plugins__install=[],plugins__activate=[],plugins__update=[],plugin_status_bar=$(".rt-framework-installer-status.plugin"),loader=button.parent(".rt-framework-installer-bottom").find(".rt-framework-installer-loading");$(".rt-framework-installer-plugin-list.checked:not(.done)").each(function(){var a=$(this).data("plugin-slug"),b=$(this).data("plugin-action");plugins.push(a),"install"==b||"install-activate"==b?plugins__install.push(a):("update"==b||"update-activate"==b)&&plugins__update.push(a),("activate"==b||"install-activate"==b||"update-activate"==b)&&plugins__activate.push(a)});var install_task={plugin:plugins__install,action:"tgmpa-bulk-install",action2:-1,_wpnonce:button.data("wpnonce-plugin"),plugin_status:"all","tgmpa-page":button.data("plugins-page"),url:button.data("plugins-url"),plugin_status:"all",task:"install"},update_task={plugin:plugins__update,action:"tgmpa-bulk-update",action2:-1,_wpnonce:button.data("wpnonce-plugin"),plugin_status:"all","tgmpa-page":button.data("plugins-page"),url:button.data("plugins-url"),plugin_status:"all",task:"update"},activate_task={plugin:plugins__activate,action:"tgmpa-bulk-activate",action2:-1,_wpnonce:button.data("wpnonce-plugin"),plugin_status:"all","tgmpa-page":button.data("plugins-page"),url:button.data("plugins-url"),plugin_status:"all",task:"activate"},tasks=[];plugins__install.length&&tasks.push("install_task"),plugins__update.length&&tasks.push("update_task"),plugins__activate.length&&tasks.push("activate_task"),tasks.length?(rt_framework_manage_plugins(eval(tasks[0])),loader.show(),button.hide()):alert(rtframework_params.select_task);var rt_framework_plugin_status_array=[];$(window).off("rt_framework_plugin_status_ready"),$(window).on("rt_framework_plugin_status_ready",function(){var a=!1;$(plugins__install).each(function(){rt_framework_plugin_status_array[this].installed?$('[data-plugin-slug="'+this+'"]').addClass("done installed"):($('[data-plugin-slug="'+this+'"]').addClass("error installed"),a=this+"-install-failed")}),$(plugins__update).each(function(){rt_framework_plugin_status_array[this].updated?$('[data-plugin-slug="'+this+'"]').addClass("done updated"):($('[data-plugin-slug="'+this+'"]').addClass("error updated"),a=this+"-update-failed")}),$(plugins__activate).each(function(){rt_framework_plugin_status_array[this].activated?$('[data-plugin-slug="'+this+'"]').addClass("done activated"):($('[data-plugin-slug="'+this+'"]').addClass("error activated"),a=this+"-activate-failed")}),a?(loader.hide(),button.show(),plugin_status_bar.html(rtframework_params.error_plugins+" [error code: "+a+"]")):(plugin_status_bar.html(rtframework_params.done),loader.hide(),button.remove(),setTimeout(function(){window.location.href=location.href.replace("themes.php","admin.php")},1e3))})}),$(".rt-framework-installer-plugin-list").on("click",function(){$(this).toggleClass("checked")}),$.fn.rt_tabs||($.fn.rt_tabs=function(){$(this).each(function(){function a(){e.each(function(){$(this).removeClass("active")}),d.each(function(){$(this).removeClass("active")})}function b(a){var b=c.find('[data-tab-number="'+a+'"]'),d=$("#"+a);b.addClass("active"),d.addClass("active")}{var c=$(this),d=($(this).find("> .tab_nav"),$(this).find("> .tab_nav > li")),e=($(this).find("> .tab_contents > .tab_content_wrapper > .tab_title"),$(this).find("> .tab_contents > .tab_content_wrapper"));$(this).attr("data-tab-position")}d.on("click",function(){a(),b($(this).attr("data-tab-number"))})}),$(this).find(".tab_nav > li:eq(0)").trigger("click")}),$.fn.rt_tabs&&$(".rt_tabs").rt_tabs(),$("#reset-design-options").on("click",function(a){a.preventDefault();var b=confirm(rtframework_variables.reset_design_options);if(b){var c=$("#rttheme_design_tabs");c.find("input:text, input:password, input:file, textarea").val(""),c.find("input:radio, input:checkbox").removeAttr("checked").removeAttr("selected");var d=c.find("select");d.val([]);var e=c.find("select:not(.multiple)");e.find("option:first").attr("selected","selected"),d.trigger("change")}})}(jQuery);